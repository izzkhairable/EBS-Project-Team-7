<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords"
        content="wrappixel, admin dashboard, html css dashboard, web dashboard, bootstrap 5 admin, bootstrap 5, css3 dashboard, bootstrap 5 dashboard, Ample lite admin bootstrap 5 dashboard, frontend, responsive bootstrap 5 admin template, Ample admin lite dashboard bootstrap 5 dashboard template">
    <meta name="description"
        content="Ample Admin Lite is powerful and clean admin dashboard template, inpired from Bootstrap Framework">
    <meta name="robots" content="noindex,nofollow">
    <title>Ample Admin Lite Template by WrapPixel</title>
    <link rel="canonical" href="https://www.wrappixel.com/templates/ample-admin-lite/" />
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="{{url_for('static', filename='plugins/images/favicon.png')}}">
    <!-- Custom CSS -->
    <link href="{{url_for('static', filename='plugins/bower_components/chartist/dist/chartist.min.css')}}"
        rel="stylesheet">
    <link rel="stylesheet"
        href="{{url_for('static', filename='plugins/bower_components/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.css')}}">
    <!-- Custom CSS -->
    <link href="{{url_for('static', filename='css/style.min.css')}}" rel="stylesheet">
</head>

<body>
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>
    <div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full"
        data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full">
        <header class="topbar" data-navbarbg="skin5">
            <nav class="navbar top-navbar navbar-expand-md navbar-dark">
                <div class="navbar-header" data-logobg="skin6">
                    <a class="navbar-brand" href="/">
                        <b class="logo-icon">
                            <img src="{{url_for('static', filename='plugins/images/logo-icon.png')}}" alt="homepage" />
                        </b>
                        <span class="logo-text">
                            <img src="{{url_for('static', filename='plugins/images/logo-text.png')}}" alt="homepage" />
                        </span>
                    </a>
                    <a class="nav-toggler waves-effect waves-light text-dark d-block d-md-none"
                        href="javascript:void(0)"><i class="ti-menu ti-close"></i></a>
                </div>
                <!-- <div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin5">
                    <ul class="navbar-nav ms-auto d-flex align-items-center">

                        <li class=" in">
                            <form role="search" class="app-search d-none d-md-block me-3">
                                <input type="text" placeholder="Search..." class="form-control mt-0">
                                <a href="" class="active">
                                    <i class="fa fa-search"></i>
                                </a>
                            </form>
                        </li>
                        <li>
                            <a class="profile-pic" href="#">
                                <img src="{{url_for('static', filename='plugins/images/users/varun.jpg')}}"
                                    alt="user-img" width="36" class="img-circle"><span
                                    class="text-white font-medium">Steave</span></a>
                        </li>
                    </ul>
                </div> -->
            </nav>
        </header>
        <aside class="left-sidebar" data-sidebarbg="skin6">
            <div class="scroll-sidebar">
                <nav class="sidebar-nav">
                    <ul id="sidebarnav">
                        <li class="sidebar-item pt-2">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="/dashboard"
                                aria-expanded="false">
                                <i class="far fa-clock" aria-hidden="true"></i>
                                <span class="hide-menu">Dashboard</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>
        <div class="page-wrapper">
            <div class="page-breadcrumb bg-white">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                        <h4 class="page-title">Dashboard</h4>
                    </div>
                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                    </div>

                    <div class="col-lg-2 col-sm-2 col-md-2 col-xs-2">
                        <form class="form-horizontal form-material" hidden>
                            <select id="view_type" class="form-select shadow-none" onchange="renderCharts()">
                                <option selected value="daily_view">Historical Daily</option>
                                <option value="monthly_view">Historical Monthly</option>
                            </select>
                        </form>
                        <form class="form-horizontal form-material">
                            <select id="zone_ddl" class="form-select shadow-none"
                                onchange="javascript:location.href = this.value;">
                            </select>
                        </form>

                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="white-box">
                            <h3 class="text-center"> <i class="fas fa-thermometer-empty"></i>
                                Air Temperature</h3>
                            <h1 class="text-center" id="current_temperature">
                            </h1>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="white-box">
                            <h3 class="text-center"> <i class="fas fa-tint"></i>
                                Humidity</h3>
                            <h1 class="text-center" id="current_humidity">
                            </h1>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="white-box">
                            <h3 class="text-center"> <i class="fas fa-tachometer-alt"></i>
                                Air Pressure</h3>
                            <h1 class="text-center" id="current_pressure">
                            </h1>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="white-box">
                            <h3 class="text-center"> <i class="fab fa-mixcloud"></i>
                                Light Intensity</h3>
                            <h1 class="text-center" id="current_light">
                            </h1>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="white-box">
                            <figure class="highcharts-figure">
                                <div id="containerTemperature"></div>
                            </figure>

                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="white-box">
                            <figure class="highcharts-figure">
                                <div id="containerHumidity"></div>
                            </figure>

                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="white-box">
                            <figure class="highcharts-figure">
                                <div id="containerPressure"></div>
                            </figure>

                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="white-box">
                            <figure class="highcharts-figure">
                                <div id="containerIntensity"></div>
                            </figure>

                        </div>
                    </div>
                </div>

                <div class="row justify-content-center">
                    <!-- <div class="col-md-5 col-lg-5 col-sm-5 col-xs-5">
                        <img class="img-fluid" id="beach_img" src="{{data2}}" />
                    </div> -->
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="container-fluid px-0">
                            <div class="white-box">

                                <div class="row justify-content-center">
                                    <h3 class="text-center">
                                        Swimming Condition</h3>
                                    <h1 class="text-center">
                                        {% if led_alert_status == "close" %}
                                        <i class="far fa-check-circle" style="color:green"></i>
                                        {% else %}
                                        <i class="far fa-times-circle" style="color:red"></i>
                                        {% endif %}
                                    </h1>
                                </div>
                            </div>
                            <div class="white-box">
                                <div class="row justify-content-center">
                                    <h3 class="box-title">Beach Overview</h3>
                                    <form class="form-horizontal form-material">
                                        <div class="form-group mb-12">
                                            <label class="col-sm-12">Select Time</label>
                                            <div class="col-sm-12 border-bottom">
                                                <select class="form-select shadow-none p-0 border-0 form-control-line"
                                                    id="renderer" onchange="renderImage()">
                                                </select>
                                            </div>
                                        </div>
                                    </form>
                                    <div id="carousel_content">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-sm-3 col-xs-3">
                        <div class="container-fluid px-0">
                            <div class="white-box">

                                <div class="row justify-content-center">
                                    <h3 class="text-center">
                                        Current Beach Visitor Count</h3>
                                    <h1 class="text-center">{{people_count}}
                                    </h1>
                                </div>
                            </div>
                            <div class="white-box">
                                <div class="row justify-content-center">
                                    <figure class="highcharts-figure">
                                        <div id="container"></div>
                                    </figure>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6">
                        <div class="white-box" style="overflow-x:auto">
                            <h3 class="box-title">Weather Forecast</h3>
                            <form class="form-horizontal form-material">
                                <div class="form-group mb-12">
                                    <label class="col-sm-12">Select Forecast Date</label>
                                    <div class="col-sm-12 border-bottom">
                                        <select class="form-select shadow-none p-0 border-0 form-control-line"
                                            id="forecast_date" onchange="forecastTable()">
                                        </select>
                                    </div>
                                </div>
                            </form>

                            <table class="table">
                                <thead>
                                    <tr>
                                        <th scope="col">Metrics</th>
                                        <th scope="col">12am</th>
                                        <th scope="col">3am</th>
                                        <th scope="col">6am</th>
                                        <th scope="col">9am</th>
                                        <th scope="col">12pm</th>
                                        <th scope="col">3pm</th>
                                        <th scope="col">6pm</th>
                                        <th scope="col">9pm</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr id="weather_row">
                                        <th scope="row">Weather</th>
                        </div>
                        </tr>
                        <tr id="temperature_row">
                            <th scope="row">Temperature</th>
                        </tr>
                        <tr id="humidity_row">
                            <th scope="row">Humidity</th>
                        </tr>
                        <tr id="pressure_row">
                            <th scope="row">Pressure</th>
                        </tr>

                        <tr id="windspeed_row">
                            <th scope="row">Wind (km/h)</th>
                        </tr>
                        <tr id="winddirection_row">
                            <th scope="row">Wind Direction</th>
                        </tr>

                        <tr id="swelldirection_row">
                            <th scope="row">Swell Direction</th>
                        </tr>
                        <!-- <tr id="swellperiod_row">
                            <th scope="row">Swell Period</th>
                        </tr>
                        <tr id="swellheight_row">
                            <th scope="row">Swell Height (m)</th>
                        </tr>
                        <tr id="swheight_row">
                            <th scope="row">Significant Wave Height (m)</th>
                        </tr> -->

                        </tbody>
                        </table>
                    </div>
                </div>
                <!-- <div class="row">
                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                        <div class="white-box">
                            <div id="waveIntensity"></div>
                        </div>
                    </div>
                </div> -->

                <!-- <div class="col-md-5 col-lg-5 col-sm-5 col-xs-5">
                        <img class="img-fluid" id="beach_img2" src="{{data3}}" />
                    </div> -->
            </div>
        </div>


        <input type="hidden" id="ddl_image_list" value="{{data}}" />
        <input type="hidden" id="forecast_data" value="{{forecast_data}}" />
        <input type="hidden" id="next_day_forecast" value="{{next_day_forecast}}" />
        <input type="hidden" id="latest_sensor_data" value="{{latest_sensor_data}}" />
        <input type="hidden" id="daily_visitor_history_count" value="{{daily_visitor_history_count}}" />
        <input type="hidden" id="monthly_visitor_history_count" value="{{monthly_visitor_history_count}}" />
        <input type="hidden" id="daily_sensor_list" value="{{daily_sensor_list}}" />
        <input type="hidden" id="zone_list" value="{{zone_list}}" />
        <input type="hidden" id="current_zone" value="{{current_zone}}" />

        <footer class="footer text-center"> 2021 © Ample Admin brought to you by <a
                href="https://www.wrappixel.com/">wrappixel.com</a>
        </footer>

    </div>
    </div>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>


    <script src="{{url_for('static', filename='plugins/bower_components/jquery/dist/jquery.min.js')}}"></script>
    <script src="{{url_for('static', filename='bootstrap/dist/js/bootstrap.bundle.min.js')}}"></script>
    <script src="{{url_for('static', filename='js/app-style-switcher.js')}}"></script>
    <script
        src="{{url_for('static', filename='plugins/bower_components/jquery-sparkline/jquery.sparkline.min.js')}}"></script>
    <script src="{{url_for('static', filename='js/waves.js')}}"></script>
    <script src="{{url_for('static', filename='js/sidebarmenu.js')}}"></script>
    <script src="{{url_for('static', filename='js/custom.js')}}"></script>
    <script src="{{url_for('static', filename='plugins/bower_components/chartist/dist/chartist.min.js')}}"></script>
    <script
        src="{{url_for('static', filename='plugins/bower_components/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.min.js')}}"></script>
    <script src="{{url_for('static', filename='js/pages/dashboards/dashboard1.js')}}"></script>
    <script src="{{url_for('static', filename='jquery/jquery-before-after-slider.js')}}"></script>
    <script src="{{url_for('static', filename='jquery/jquery-before-after-slider-min.js')}}"></script>
    <script>//https://www.highcharts.com/demo/line-labels

        zoneList = document.getElementById("zone_list").value.split('|')
        zoneDDL = ''
        for (zone of zoneList) {
            if (zone == document.getElementById("current_zone").value) {
                zoneDDL = zoneDDL + `<option selected value="/dashboard/${zone}">${zone}</option>`
            }
            else {
                zoneDDL = zoneDDL + `<option value="/dashboard/${zone}">${zone}</option>`
            }
        }
        document.getElementById("zone_ddl").innerHTML = zoneDDL

        function isEmptyOrSpaces(str) {
            return str === null || str.match(/^ *$/) !== null;
        }
        renderCharts()
        function renderCharts() {
            if (document.getElementById("daily_visitor_history_count").value != '' && document.getElementById("monthly_visitor_history_count").value != '') {
                dailyVisitorHistoryList = document.getElementById("daily_visitor_history_count").value.split('|')
                monthlyVisitorHistoryList = document.getElementById("monthly_visitor_history_count").value.split('|')

                dayOrMonth = ""
                seriesList = []
                categoriesList = []
                if (document.getElementById('view_type').value == "daily_view") {
                    dayOrMonth = "Days"
                    for (day of dailyVisitorHistoryList) {
                        jsonObj = JSON.parse(day)
                        seriesList.push(Math.floor(jsonObj["count"]))
                        categoriesList.push(new Date(jsonObj["date"]).getDate().toString() + "-" + parseInt(new Date(jsonObj["date"]).getMonth() + 1).toString() + "-" + new Date(jsonObj["date"]).getFullYear().toString())
                    }
                }
                else if (document.getElementById('view_type').value == "monthly_view") {
                    dayOrMonth = "Months"
                    for (month of monthlyVisitorHistoryList) {
                        jsonObj = JSON.parse(month)
                        seriesList.push(Math.floor(jsonObj["count"]))
                        categoriesList.push(parseInt(new Date(jsonObj["date"]).getMonth() + 1).toString() + "-" + new Date(jsonObj["date"]).getFullYear().toString())
                    }

                }
                seriesList.reverse()
                categoriesList.reverse()
                Highcharts.chart('container', {
                    chart: {
                        type: 'line'
                    },
                    title: {
                        text: 'Visitor Count (Last ' + categoriesList.length + ' ' + dayOrMonth + ')'
                    },
                    subtitle: {
                        text: 'Source: WorldClimate.com',
                    },
                    xAxis: {
                        categories: categoriesList
                    },
                    yAxis: {
                        title: {
                            text: 'No. of Beachgoers',
                            enabled: false
                        }
                    },
                    plotOptions: {
                        line: {
                            dataLabels: {
                                enabled: true
                            },
                            enableMouseTracking: false
                        }
                    },
                    series: [{
                        name: '',
                        data: seriesList
                    }],
                    legend: {
                        enabled: false //disable legend https://api.highcharts.com/highcharts/legend
                    }
                });
            }


            if (document.getElementById("daily_sensor_list").value != '') {
                dailySensorList = document.getElementById("daily_sensor_list").value.split('|')

                dayOrMonth = ""
                temperatureList = []
                humidityList = []
                pressureList = []
                intensityList = []
                gyroscopeXList = []
                gyroscopeYList = []
                gyroscopeZList = []

                categoriesList = []
                if (document.getElementById('view_type').value == "daily_view") {
                    dayOrMonth = "Days"
                    for (day of dailySensorList) {
                        jsonObj = JSON.parse(day)
                        temperatureList.push(Math.floor(jsonObj["ambientTemperature"]))
                        humidityList.push(Math.floor(jsonObj["ambientHumidity"]))
                        pressureList.push(Math.floor(jsonObj["ambientPressure"]))
                        intensityList.push(Math.floor(jsonObj["ambientLight"]))
                        gyroscopeXList.push(Math.floor(jsonObj["gyroscopeX"]))
                        gyroscopeYList.push(Math.floor(jsonObj["gyroscopeY"]))
                        gyroscopeZList.push(Math.floor(jsonObj["gyroscopeZ"]))
                        categoriesList.push(new Date(jsonObj["date"]).getDate().toString() + "-" + parseInt(new Date(jsonObj["date"]).getMonth() + 1).toString() + "-" + new Date(jsonObj["date"]).getFullYear().toString())
                    }
                }
                console.log(temperatureList)
                temperatureList.reverse()
                categoriesList.reverse()
                Highcharts.chart('containerTemperature', {
                    chart: {
                        type: 'line'
                    },
                    title: {
                        text: 'Average Temperature (Last ' + categoriesList.length + ' ' + dayOrMonth + ')'
                    },
                    subtitle: {
                        text: 'Source: WorldClimate.com'
                    },
                    xAxis: {
                        categories: categoriesList
                    },
                    yAxis: {
                        title: {
                            text: 'Temperature',
                            enabled: false
                        }
                    },
                    plotOptions: {
                        line: {
                            dataLabels: {
                                enabled: true
                            },
                            enableMouseTracking: false
                        }
                    },
                    series: [{
                        name: '',
                        data: temperatureList
                    }],
                    legend: {
                        enabled: false //disable legend https://api.highcharts.com/highcharts/legend
                    }
                });

                Highcharts.chart('containerHumidity', {
                    chart: {
                        type: 'line'
                    },
                    title: {
                        text: 'Average Humidity (Last ' + categoriesList.length + ' ' + dayOrMonth + ')'
                    },
                    subtitle: {
                        text: 'Source: WorldClimate.com'
                    },
                    xAxis: {
                        categories: categoriesList
                    },
                    yAxis: {
                        title: {
                            text: 'Humidity',
                            enabled: false
                        }
                    },
                    plotOptions: {
                        line: {
                            dataLabels: {
                                enabled: true
                            },
                            enableMouseTracking: false
                        }
                    },
                    series: [{
                        name: '',
                        data: humidityList
                    }],
                    legend: {
                        enabled: false //disable legend https://api.highcharts.com/highcharts/legend
                    }
                });

                Highcharts.chart('containerPressure', {
                    chart: {
                        type: 'line'
                    },
                    title: {
                        text: 'Average Pressure (Last ' + categoriesList.length + ' ' + dayOrMonth + ')'
                    },
                    subtitle: {
                        text: 'Source: WorldClimate.com'
                    },
                    xAxis: {
                        categories: categoriesList
                    },
                    yAxis: {
                        title: {
                            text: 'Pressure',
                            enabled: false
                        }
                    },
                    plotOptions: {
                        line: {
                            dataLabels: {
                                enabled: true
                            },
                            enableMouseTracking: false
                        }
                    },
                    series: [{
                        name: '',
                        data: pressureList
                    }],
                    legend: {
                        enabled: false //disable legend https://api.highcharts.com/highcharts/legend
                    }
                });

                Highcharts.chart('containerIntensity', {
                    chart: {
                        type: 'line'
                    },
                    title: {
                        text: 'Average Light Intensity (Last ' + categoriesList.length + ' ' + dayOrMonth + ')'
                    },
                    subtitle: {
                        text: 'Source: WorldClimate.com'
                    },
                    xAxis: {
                        categories: categoriesList
                    },
                    yAxis: {
                        title: {
                            text: 'Light Intensity',
                            enabled: false
                        }
                    },
                    plotOptions: {
                        line: {
                            dataLabels: {
                                enabled: true
                            },
                            enableMouseTracking: false
                        }
                    },
                    series: [{
                        name: '',
                        data: intensityList
                    }],
                    legend: {
                        enabled: false //disable legend https://api.highcharts.com/highcharts/legend
                    }
                });
                // Highcharts.chart('waveIntensity', {
                //     chart: {
                //         type: 'line'
                //     },
                //     title: {
                //         text: 'Average Wave Intensity (Last ' + categoriesList.length + ' ' + dayOrMonth + ')'
                //     },
                //     subtitle: {
                //         text: 'Source: WorldClimate.com'
                //     },
                //     xAxis: {
                //         categories: categoriesList
                //     },
                //     yAxis: {
                //         title: {
                //             text: 'Wave Intensity',
                //             enabled: false
                //         }
                //     },
                //     plotOptions: {
                //         line: {
                //             dataLabels: {
                //                 enabled: true
                //             },
                //             enableMouseTracking: false
                //         }
                //     },
                //     series: [{
                //         name: 'X',
                //         data: gyroscopeXList
                //     }, {
                //         name: 'Y',
                //         data: gyroscopeYList
                //     }, {
                //         name: 'Z',
                //         data: gyroscopeZList
                //     }],
                //     legend: {
                //         enabled: true //disable legend https://api.highcharts.com/highcharts/legend
                //     }
                // });

            }
        }
        latest_sensor_data = JSON.parse(document.getElementById("latest_sensor_data").value)
        document.getElementById("current_temperature").innerText = latest_sensor_data["ambientTemperature"] + " °C"
        document.getElementById("current_humidity").innerText = latest_sensor_data["ambientHumidity"] + "%"
        document.getElementById("current_pressure").innerText = latest_sensor_data["ambientPressure"] + " kPa"
        document.getElementById("current_light").innerText = latest_sensor_data["ambientLight"]

        var ddl_image_list = document.getElementById('ddl_image_list').value;
        var image_list = ddl_image_list.split('|')
        var ddl1 = `<option selected value="{{url_for('static', filename='image/image.png')}}">Now</option>`
        if (isEmptyOrSpaces(ddl_image_list) == false) {
            for (image of image_list) {
                imgjson = JSON.parse(image)
                ddl1 = ddl1 + "<option value=\"" + imgjson['link'] + "\">" + imgjson['title'] + "</option>";
            }
        }
        document.getElementById("renderer").innerHTML = ddl1

        document.getElementById("carousel_content").innerHTML = `
                <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel"
                    data-bs-interval="false">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <a href="{{url_for('static', filename='image/image.png')}}"><img src="{{url_for('static', filename='image/image.png')}}?rev=${new Date().getTime()}" class="d-block w-100" alt="..."></a> 
                        </div>
                    </div>
                    <button class="invisible carousel-control-prev" type="button"
                        data-bs-target="#carouselExampleFade" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="invisible carousel-control-next" type="button"
                        data-bs-target="#carouselExampleFade" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>

            `
        //https://stackoverflow.com/questions/41725252/how-to-prevent-browser-image-caching-in-html


        function renderImage() {
            var sel = document.getElementById("renderer");
            var caption = sel.options[sel.selectedIndex].text;
            var imgurl = sel.value


            document.getElementById("carousel_content").innerHTML = `
            <div class="white-box">
                <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel"
                    data-bs-interval="false">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <a href="${imgurl}"><img src="${imgurl}" class="d-block w-100" alt="..."></a>
                        </div>
                    </div>
                    <button class="invisible carousel-control-prev" type="button"
                        data-bs-target="#carouselExampleFade" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="invisible carousel-control-next" type="button"
                        data-bs-target="#carouselExampleFade" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
                </div>

            `

        }
        // Assuming today is 18 October 2021 
        var forecastData = JSON.parse(document.getElementById('forecast_data').value)


        var next_day_forecast = JSON.parse(document.getElementById("next_day_forecast").value)

        var forecastDDL = ""
        var counter = 0;
        for (x of forecastData['data']['weather']) {
            if (counter == 0) {
                forecastDDL = forecastDDL + "<option selected value=\"" + x['date'] + "\">" + x['date'] + "</option>";
            }
            else {
                forecastDDL = forecastDDL + "<option value=\"" + x['date'] + "\">" + x['date'] + "</option>";
            }
            counter = counter + 1
        }
        document.getElementById("forecast_date").innerHTML = forecastDDL
        var weatherHtml = `<th scope="row">Weather</th>`;
        var temperatureHTML = `<th scope="row">Temperature</th>`;
        var humidityHTML = `<th scope="row">Humidity</th>`;
        var pressureHTML = `<th scope="row">Pressure</th>`;
        var windspeedHTML = `<th scope="row">Wind (km/h)</th>`;
        var windDirectionHTML = `<th scope="row">Wind Direction</th>`;
        var swellDirectionTHTML = `<th scope="row">Swell Direction</th>`;
        // var swellPeriodTHTML = `<th scope="row">Swell Period</th>`;
        // var swellHeightTHTML = `<th scope="row">Swell Height (m)</th>`;
        // var swHeightHTML = `<th scope="row">Significant Wave Height (m)	</th>`;

        for (hour of next_day_forecast['hourly']) {
            weatherHtml = weatherHtml + `<td><img src="${hour['weatherIconUrl'][0]['value']}" style="width:36px;height:36px"/></td>`
            temperatureHTML = temperatureHTML + `<td>${hour['tempC']}</td>`
            humidityHTML = humidityHTML + `<td>${hour['humidity']}</td>`
            pressureHTML = pressureHTML + `<td>${hour['pressure']}</td>`
            windspeedHTML = windspeedHTML + `<td>${hour['windspeedKmph']}</td>`
            windDirectionHTML = windDirectionHTML + `<td>${hour['winddirDegree']}<i class='fas fa-arrow-up' style="transform: rotate(${hour['winddirDegree']}deg)"></i></td>`
            swellDirectionTHTML = swellDirectionTHTML + `<td>${hour['swellDir']}<i class='fas fa-arrow-up' style="transform: rotate(${hour['swellDir']}deg)"></i></td>`
            // swellPeriodTHTML = swellPeriodTHTML + `<td>${hour['swellPeriod_secs']}</td>`
            // swellHeightTHTML = swellHeightTHTML + `<td>${hour['swellHeight_m']}</td>`
            // swHeightHTML = swHeightHTML + `<td>${hour['sigHeight_m']}</td>`

        }


        document.getElementById("weather_row").innerHTML = weatherHtml
        document.getElementById("temperature_row").innerHTML = temperatureHTML
        document.getElementById("humidity_row").innerHTML = humidityHTML
        document.getElementById("pressure_row").innerHTML = pressureHTML
        document.getElementById("windspeed_row").innerHTML = windspeedHTML
        document.getElementById("winddirection_row").innerHTML = windDirectionHTML
        document.getElementById("swelldirection_row").innerHTML = swellDirectionTHTML
        // document.getElementById("swellperiod_row").innerHTML = swellPeriodTHTML
        // document.getElementById("swellheight_row").innerHTML = swellHeightTHTML
        // document.getElementById("swheight_row").innerHTML = swHeightHTML

        function forecastTable() {
            var weatherHtml = `<th scope="row">Weather</th>`;
            var temperatureHTML = `<th scope="row">Temperature</th>`;
            var humidityHTML = `<th scope="row">Humidity</th>`;
            var pressureHTML = `<th scope="row">Pressure</th>`;
            var windspeedHTML = `<th scope="row">Wind (km/h)</th>`;
            var windDirectionHTML = `<th scope="row">Wind Direction</th>`;
            var swellDirectionTHTML = `<th scope="row">Swell Direction</th>`;
            // var swellPeriodTHTML = `<th scope="row">Swell Period</th>`;
            // var swellHeightTHTML = `<th scope="row">Swell Height (m)</th>`;
            // var swHeightHTML = `<th scope="row">Significant Wave Height (m)	</th>`;

            for (x of forecastData['data']['weather']) {
                if (x['date'] == document.getElementById('forecast_date').value) {
                    for (y of x['hourly']) {
                        weatherHtml = weatherHtml + `<td><img src="${y['weatherIconUrl'][0]['value']}" style="width:36px;height:36px"/></td>`
                        temperatureHTML = temperatureHTML + `<td>${y['tempC']}</td>`
                        humidityHTML = humidityHTML + `<td>${y['humidity']}</td>`
                        pressureHTML = pressureHTML + `<td>${y['pressure']}</td>`
                        windspeedHTML = windspeedHTML + `<td>${y['windspeedKmph']}</td>`
                        windDirectionHTML = windDirectionHTML + `<td>${y['winddirDegree']}<i class='fas fa-arrow-up' style="transform: rotate(${y['winddirDegree']}deg)"></i></td>`
                        swellDirectionTHTML = swellDirectionTHTML + `<td>${y['swellDir']}<i class='fas fa-arrow-up' style="transform: rotate(${y['swellDir']}deg)"></i></td>`
                        // swellPeriodTHTML = swellPeriodTHTML + `<td>${y['swellPeriod_secs']}</td>`
                        // swellHeightTHTML = swellHeightTHTML + `<td>${y['swellHeight_m']}</td>`
                        // swHeightHTML = swHeightHTML + `<td>${y['sigHeight_m']}</td>`

                    }
                }
            }
            console.log(weatherHtml)
            document.getElementById("weather_row").innerHTML = weatherHtml
            document.getElementById("temperature_row").innerHTML = temperatureHTML
            document.getElementById("humidity_row").innerHTML = humidityHTML
            document.getElementById("pressure_row").innerHTML = pressureHTML
            document.getElementById("windspeed_row").innerHTML = windspeedHTML
            document.getElementById("winddirection_row").innerHTML = windDirectionHTML
            document.getElementById("swelldirection_row").innerHTML = swellDirectionTHTML
            // document.getElementById("swellperiod_row").innerHTML = swellPeriodTHTML
            // document.getElementById("swellheight_row").innerHTML = swellHeightTHTML
            // document.getElementById("swheight_row").innerHTML = swHeightHTML

        }

    </script>
</body>

</html>